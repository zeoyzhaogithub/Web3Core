# 金库合约

## 金库合约的概念

Vault 是一种智能合约，用户可以在其中存入代币（如USDT，USDC，DAI，WBTC，WETH等），并获取股份作为回报。这些股份代表了用在金库中的所有权，与他们存入的代币成比例。

根据金库的状况，用户可以提取他们的初始存款以及任何赚取的利润或者产生的损失。

## 金库函数的推导

### 充值和份额分配

当用户将代币存入金库时，合约会根据金库代币总余额的增加计算要发行的股份数，这确保股份分配是公平，并于存款的规模相关。

原则：如果存款使金库的代币增加了一定的百分比，那么总股份数量也会以相同的百分比增加，从而确保所有参与者之间的公平性

得到结论：s=aT/B

### 提取资金

归还一部分的share，换取对应的token，提款之后，流程逆转，share被销毁，用户收到他们的代币，金额会根据金库的收益或者损失进行调整

得到结论：a=Bs/T
